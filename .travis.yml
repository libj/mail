# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: biMY3IdzSCaOdk2+iwoQqj7DJYucYgX3u1vwMLoH31inM6C9VBwOp/kzHWwP3uSzquiVCJNhSKbc02rTfDR/qf2OsSieCFlsyf1Nkc5g/nD1aMjZoWUwrXNasXRU/IjXTitw3NIpCwgX++1oGxGNYfGf0JV2jm/pmW4PexlLqSc45mvo74ICBur9wEnfFPhASo0ANRZRt7evP0ij3ETpGFu1JsyLAYTC4ZnjUfAcx97uPufTqp6USJjLSDagEljhWtEcv5nE1deD81thyUbLJDEAAs0Uyo02/L0MrN5//STZqof0f23emjBYIQodpASSHApD24f9N8PmQ6fbm+orged2Mt0kU2Z/0Qv7M+KDqhgl4Am5SP+lXuUUkHr0ydRK9A3HQTCv+TFN9lvQ7zMlIKifoyqr8fCY9Z5dTwBJUH/pAV3ksMfc4mI0ih/guNGLsdvzmgKTb1FLIlPZKAtrZ7gYjgGUPx2Ga/ru65DGgOwWe5BQeE97P3wmdT0fx7NpyrBVNOP46RPM9YI5AWBSFYHB7cLHLqAzWcUAr5ILy4xhu1YSau3OQbnARgwq2mbQVOE13Mj3/FUsw6/hSXdwXayM/TF4po4rMz9B8/gIHzodlYQbBqS2MmI8fQPRBIGJiLUautTZiiswdl3zONJlM6pX1BZSozEyGLhe8TWhnXg=
  - secure: J/pj0ome3Nidib9CA1YfK3Isc3cvZT+QdGAKXSVh4tKJZCWsqSUcM0oh+QNQbJE50sug/JDUtENFQ369w6EtAN77xAblGJ6QJkb6YTw0hZB7Amb2zkTiOMCZt+rH+/QdmUaB3fm9RdzxE2WT4Bq8IBgRLlbMLzR7CvUuCOldpQ0pLvndm2IXQqNhZhpi9cPCtEz6t12S6CeA7KxC6KNW+Hg42Hyav4igPRcDO5lML4BbkjmucSdGPVeTCwjKmZWXMi+JE9E5O9WuNguNEtriKTXhATCourSLbE/NEvrbypZlcVDBHqh5/bXVPnGhsfiDHvoRlvR4pfW++TR8eAwCzQuN/P8+icFRYv6LbaU/ss2er1UuiXt/b3YjeV2PcEwSolU920DHPRz7Oqb6SLDdCGz4rOr7pxIuisSJX3HRukEkkS7G4tzkzysg7dL8Qio0UdA2228/3FQ6Lr1ier5vnwmtE9Lds5Jz64KZo/bxND2RwXwg2MhmBaJknU3I7oZYFtWytYzQkrhiMJg+XT6OzgpgSS73K32lwz3pKc8N+jGqNx+STk1rwshxEAXkIKsXF2AmvmW8u1jTSon4CZPbfbBDUEBDQkzMzJ0NB7qYhkk2UdAxyaZG34Rr+lAwhD4WimgeQGihqnNDqeNn8uIyaSsn/ycHMhMSIKH8FUFliNI=
  - secure: iCnwZqliXcJYOZnom+Kkl56fZvbMsBhjrkf0HAqiihrTlegqTf25WNj9LSQ/7PSrmyGSgZwUxPA+tfk07CKIr1U785e518tiEFZ4j9W4SARzOgAF4T5Pn/cmFSDOd6MdANnSwAojczjMjzPCn5Co2OX9ikRL7R98vCzO3y9wkKe/BmZ326mORoC84XHT/Dkc/aHWVrV+yVT1yWfKea3XSK3SGoMKnBol6ubaLH+r6d05QrFtv4oQhCFqFqPq81dbJlROiTGDXX4Y9jglgGS2CpTHXxguOSg33xQK1bgJ7E7aopKW2Loij97EBa6V9PCR5r5AO9mD6TppbbB958ac/kSPr0kk5WQERS4PwxktJ9pc3uqcmyjcajIzfyqk5K9sxabV9P5d3RWKUF6iyh9571jO1XFfMLMWMHG+oqMh0SM+WhEmdO2P35nC0/DtOPOZQwpEATzkd9PbgCkdUFVBkS9HFN2vJER43xRAnbHF8QsChlWySqOqtVEnHQI2sfqR1HbtuzkvSRX8zh8LoIP5CenkRdbMx8Wp++E0kdYsq6Z7srJ/OYpu/46DpSpaq/FkMe0EJgU+WZcRdY3rhL9dlBfw+YalegRPwmZ7g5R7z128eAQdTee2E6J6DEwMrQr6QFWZA9q5I08xZ0M1/JNfR1tPV8mxDH71GEomOVkaNW0=
  - secure: A2KNea175/3b55ACDbpO043h9EIEUxgmdhwnX9Cmy/w59Au3cl6jpS5hqAZQyIBD4Ie8tytnH1iwzap4oqbdkzTPJ8Tfnt37TL00fqHgAg4Nk22kfmWIw+ky/V/ukoj/g3EzEQhWEjrT78JhTe3hNLOOJTNqjgX/Izo5SZyttHCWinBPsMcOdm5Osxsv7CbB7GrkddsHiY3+L8lsq/GZKLGYJq/PSd7zdGVqfi1mWlM1duSwjLfq4ed1145Nl6UDyA0b18AzTeD2ScJedN2JDG7q+Tu45cZgEXTz/y9OHeeZ8eBqLQBjw1SbfWaDrKMgUAtTE4yMjfb36LXqvmxEd7NSMmzczkjGNDpHr98Tf3nrQUR6tyIA15toDQ5vTUDcQqy9UVjdSMzwwI8NFMHa3yjC3SdI92Am5ps/bHPtYJEoRhbg0glDZ2G9WX35V+FQUlncboGX9eMXgLIBpYMcAu9sVqSyfHvXkBbEcLHg02QqVL7E6gDsoa+K1UB28wgvWGbdNDO+088lkpSWkQEpwOxr34LIZzGsAyJyFPm7HFnu/qVcrNtlxmuYb6TUTGy9qaS3+kWFkblex9yE1UInIKqGBJ6X9V6CTTLpK3l3NOH1a+LAixE57kOIhalGn9jHnDsK0MmQRcbqnjROWzRlA/MoWOSUDbfpz3BmBAJmAsc=
  - secure: h1DqSZC3uBaVJultycJxzFY8GmMkFCzWVBwTIQpQz7bcU9D5QyYkn0qWOmn2XQLBT82HvQ5za3KgFh3rqupIUd1qLtiT0vkwzWm3/Eb5FGS5E8P0rrI7huXhjdgzxHHehPn0/D6sBxVUB79/wwfdhqxWTe0M1nKy+zpgDbjiHkZkL8C1mMNXrVVW28LkthV8ZjecEfEc4ZaoFwBi8v+cd/W6wmubvQ4X8MPs3P8c3qkUddKf975tSzpF0mSsywDekPx82Nvza8qTY/XvJO7sHWuqG82W4IIRZT1EYYDZXiD2vI5SrPGZP8UCTc34bXVfVu/UADA4neWnjVlhFDVLCP6Sthqko6GWxVco7qCL1OZAa1jXWhHgdxOpQoLDnzSRo4yFjFx6WSnLIYP5PijxtciJ5l8HfuFk8c8Qv7H+HJZptCmnrs2lZX0DaB0ojvB6opWoZR6jF8mVg23y1jYmelvVuEf6zVfZYBqL0AuG/2TB1gLR8KbCuTxipEzvGhDM82Xatzs1iPSzUVUQ9UA5M4WuJ2JolGzRhMnGjL+3If2B6+8aGk6ifxZ18mKlPDCILBCfMdwx7ZgYdJV3xUgAtD36n6el8EUlJreqI0vdjA8bWdw/EDuiXs/v1lHnTwI9ZbJrgavGEjJYYKeYDX7ShU5AsWe7auZuG4k5iw7DHN4=
  - secure: FGB+QbnMqPrYqF5X04RjIdpSZ9/pHL2v4YZxWmVn8uhPlnlp30/LYOSC+3OPSUl5aX4tV6D7PzaHuVK5mwf3M5LPgsCa8d1k/s7i2m23JY7TT+OPtoK0OCdDIdK/84V8luQJeeeMPPyDjd11Gk+yaqwBXQ0qhOwUoaB1l+TAluMyVNifG6FQ6UDCEVMl0nd5l8Yb0VRVuIuFohz5i2sYQNdjzD+HCkx9nXo9IOVhTqVcYji3NAHN0rTwZM/N89u3766wfBIx6G4gH2Rc8YUa6VVCvG00bMMjiZSi2ZFR507hihxo8ACLee9CdU92FJjLGtZZUYycKbePftQevVjnlWMLOhQqWoyyocOMgF/uhwd3pWKEeM121GLsy8HiP2gGxkPht4CwWScC7GlTtFqk4Vhg2XnEmdR+XnRoLjRRloFO9AbViLuyIOy8VkEIz9+VLd5Rxv9wbQ+a9p/fw7jTdUmJpN1EBe8bKLnxrqq89fzs1oXaeDNLyuJ2EVDqYpaDIp9I5YTMP1jMovDtd1/4YHzg+X0/Q56gWS59AC6vP36DRkrWq7l48pfPyA2qeEmdIjzWvTu5jYdwO7kqSNi34CFtCB2+RwOPk6rRDEa7odZuhj7tQXmr5B9YB45hCPcJGbZtZ6wHGmqxsCMINUpXM30hdGTSJxgNnA6VMyuTtXI=
  - secure: l6feAfKQnd15DacCW8MbV1oc/7jM2C99M4KfpoSWOTlBz/amFwNl9Ui6Xc1d15CdzNUGYRdHnYHb3flWUNkqbf1+TAiu/Zw+RaYXb/uH/kwThxGbfkptPh5R57yOJOEjOsLG1OScvLsZgoYykzHU+NjYrHhfBgsf+WXdYpMCxzgtKnrJZVcM/AcSsg7jpO4wiqBZMyAgs/povqfeEt4L+qUvubgPcct/+zKXIlcjP93tWVg8g9PvHBXKIQcTq0K/EgDyGQxUm6T8d+eWgkkS+K3znHJzTMwQzvYH0++MhzQqppLKs82CuJWURzg4Zj3wKN92MicSMGC7Sz4yUGU5z2IlnKGYCDMSk6ENbqTBZq+ypDqRBQKOgkEOxQM9gG3h1mHS+S5ZCe1AzIk9Q463mjoM4SPb6ONfFWL9f7700E+PrUoLkjzk4mIiIaDXRdNs+mVEETDRg9VoegkJRdfCAW9ksxWAah9xpPK9i8GSOYgXa0Wod6MdcnwKKfzuZazjra5BkCl0CLPUKCdg2qw5bdboaG6UvlXosMAsHjpNP1FrOzMYoS6FUrlgg8ENRwZ83vShzUA2j6mWgZ94axoAv8gOrHsgHMNDPJg68kG5IrV2EAPBjXmc4H37O6CE0yEGB4q2qgba6YTwhRJwXGJ6Bz3Dv/f9ZkFbDNFAQaOHNHE=
