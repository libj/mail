# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: CjxuxWeNE7ZcbgFjgG9+t1KY/KY9VZ9Ki/hiV9ztMgaa5/YCB9XOBY7YYsNRVS48HDx2/FVYKBcAK+qT7daKEA+GccfPSFF+81XE/0T5+G4ODz/hnbhFezo5uHGNwpF/FFYnnw5+x1XBkfzqaBrvNKlLUGHdASkq/+uPa49daEB4WSH3DQNolyJ5WtihP+W+ZmYyhraoq4mJubF0XahDWosxxAmsOeh5PkRvZBbWPJ+7F8p2/HQox1MOS/0Z3JQ1/mHB/gGgAeCNwmGpCKwlMZRg0+WaeDPJDXkdv2lySctHW27OX1To94A6HxQxJk9RM5F5/3Ng66NPiMMGutGj14mIExpGj7yifiDRNHWCPPr/OYD5JRsRCVjA10M4vKXIMuwrNjN2nOGy0MCg7GQmdugRq1FwzkqGvqyfvhVrD+DTtP4K/6kWJzw/X3aEA5/lO1dv90+NrFkJZHbpyHJ6xwUSFmzn8aQz9gZLolNR36EDGMjR7cRv/qUpfpTAr6MeL/6qCS5zgct/y6dychXGeTI4FtdP6I/ps4+oy5SLaU/ydb4PHrlXfXVDsf5PJ5IOtdOgZDRAfUMWXEFI+wepBAedU+ZqhkP6p//WqksIs4GvOrI7mJSqkac84RzM4t2h/KfXX+6xO+hssL2pTTeTDCl7AUMU3lCs1hnzMMY4i9s=
  - secure: cdKesPoGlxMxkNtefXzTmsU/wcYPPYsjIHFDd0FQ5ulE/GnjU545XVToHzFhOKGZu/ntbyBcOXI+B3yEqjJymzLGTNQQBLdXgOXePFHJtEZIneEN5mkxegVVZSMGt7AA6ipFzNg0SRH9JIgDlgrGInz8how6ZQSUoreYPqd52EOc0oZ8bOIJqx88mIC9aNCYN7y59dO1iipR0aQu8iAX2zEP4lUc5Kxx/5L+HMNvrQcdmkeTQsMlpJs/5hmjUoH2Qjy1IB/vtmqQ6ZmniIjf9B8CkOuauVPLRqTejj9TpNQrt7b3hwPqSwNHoBNaLJ3Fk1U2g3dPwh6TE11qqfd56P7qv5JsGaZwe7GuYy2IN57xBj0VMsekN+nPZnu9y3shVL9bzu+MSP6SXa2M0KBGB0uUuITUjjlsMSPLjSXra9oSJcBstFzZKUHnMxTeaVuAkkwOGsUteAy32AQrKisKIxXyH6LvZhlcAKgE638q2/avSfX9oTuMK2kT6pawmFzVbmS3z91Po1RZOY/bSkuIK5LS5o79tc4nQzNnMknO6b4D8wwilH1IJkXbWl2hJg8c46tzWwViJneJEX9V3IKsOgq3vvM3DfHvYT4KPFuedS3QItuRZjPmnaQVT4kNuWASjYqdDAtDb5cUb8zwtlFcpEOSfWatPVX4CdzNnnXfNMQ=
  - secure: gocnQIwYY/T4rtA9tuWhq3vvk/69s7P+SuT5V2OKQRmElw4J1qPoZywEYV1iI9++6LAHRva1blTDT5v2zJLlvnOxbIZoEk6kCgcxQ/f+q8W0KJhtyPfg7lgGk7H0U/Sq6za6SOfEiRJB/O5MIjSFtJnVXMZ+8g4npgwfrZ9A8XoV6IqpZkP8kXjMMo//JG4J0QmFGI64aiE54VlZ93na2TJc9zXlDxjPoN08KLEfOC1u0+OyZc6nKGfQwppoNXP+kDH8X1r6CYyf4pQL1TEvuZXGtRoO/815hAa+CHKAS0YhH9PZhIge9LAMb19Cw493+FxvxaQkvLTK4Ccua7pFS7s6uW9yVSm2XN/n7JM5OlqP8Lz/4iluTHJ0wY6CLDARmJTv1h04ADP7dzE66NGc2EKzvfW3emyk2oUrQNEmdR+FqWhJXg0pKVhB8RWAtZO9Xh5eUFzMLrZ8OxmnucrdijKZ/rob/FhZ8QQKdbXGPfMIBBvC6bTZbzxXfhEkaYZjP6o/ub6MBRNu66Nlgu4jKxB6ejRdTffBJ8YmT9P680R6RLNfNFYxUBDPzFS1mPxND0anjVWyDsoz4h86/bwaNXDCO5ZcDu7zFbwWQbQdcaKBQAQiLip54f9TctNhIJm61Ec+p/Kn7OSQ2hBFaWoGIwgoy7BfNMdBbg6GI3bG2eM=
  - secure: f8eRN6WkkBDM5AShCiOvD7OeLaeavS5T/vVIUWSpAy/ptAhAZnHkiKUWly50PSDd162aZvgwONkB8JZR45UP6spRCLA0TG5eQzZbWQ8N2lDyHZMEOst3ClcC2K/K69bYAkorBWJHplrEBi2HaTOAMkWDBY2qeHZeIdgO+DKo1HbAaW98bhRdXtlQERhz49W3M4fnkEo5jCQ3cAZRTSGN9I00RDO07A/c6zAAXEmWDn3hakdxsnwhMr2tSW+qNh0PWQvb0atqhbFdyTuinJTbR2oixaitZsherBKXRaLvIaLKpDHZXDz1oaZhDMgAXnYlfr7TYuflaqH9C5gMj33qxRbrlSDrpkBTAMBMO5MvMrqvxmOMF+E1lSvQGlkWJ7fiXUE5j6VhYN/dIW7z74FcTGfw5ObmJv6Sfys2dkouh9NqP2TKmjx8TQ1nXGS3iNOoB+4dB/glZ9+gBF7sE2ijBud4ev3YyRhGGmgq7YS/LXH7QoD1jFPbD3KKYmMJiTeUB887Tqmj/A0XaL8GeTd5MdUVyvkySoZr7bAzRSVfgd++WPfC50GJiDAtzMsjLy9gXZUWnhpZLDESUpZrP4j5o4i4BYVDHXEelp5nCViTQJhmyTplwGJLLaUUInLfCOSQCfbKb4w6LU0e9NLJdQkEyXM7pfKwIeTtU49ugZ4bzrc=
  - secure: SyV3iSNFRmyCzR54gxAtkdLECTalsOoGxfWT2C2JI3dD7HOX6COUbX8iWFY36RVXhBRpC84tdQhQ4H3oUUul6GazSsgciCFiBCaZ3gzjza3wyVg0kT8Ro2n5JZ+die9ehjzajBRdfxd2zA87j1kz25nWegKICgyKLCgcHPi95+FnwTgfmXjLmdRV/x4osBOHwS6iC/o0qa0oBTrzhTX3Wyk1aF8JIlcJNiFmr7RzJE8eCnTDjFpOWzQchOv4mT2cF53Vex87xPeW1eXNASAp1Og8z5/LQBfYx46sJhI3Htmex/uNdUCYIBd6jdmErkNG6uMmd9uuxakP7zDGhME0og9lDTMuYE8vHlwBV3XiEqJkM5+lvUhlrxYwvrT/J1kTl3BUTZyohd1mXVdjh1dZmSy/maOTUuHj8L8dNW8Wkecmw5WL/T4rqqCbRiEyolsWiDMM+oKQlKjccQF0gC6tL+z62Lgwbu34FwpKNWc2p3yvPUZrHuFZLO50i3oWojs+at5aT4od/AQJaesUBFYOW9VGi48UezCWubBRBD7zZ5jYi49+5aMIfqPRaXHk7IcnB/rRIK9PAmOqSZR30EKw24fn+fx0HTllwuuEKnLFu0aRQUMjKSXBUClk2NHUOWOzQPhAYZEZIMyt7a6L0QRamQToJ/i+pUAujvYNsTXGxdY=
  - secure: IR19+HdU02pG+ViySQxSgJ1X9De4PkUqIfqkdC6hTnIhJ5TjIXJ208JKDtoWN4VQbiHaaHwJQRzojyoLaQiSKQJn++EWgB0Qm5rMdDMohUA4VSF6YvMmHb82znSlg4uqgKOOt3GCdp6uidr2eGG59p60pGnLdgHbyYODYJwZTlfn5bIj3Zsuqsnw1LGO7PpBc7aM9SUbJQAH2uNDn0nbvtvQqDcmtwCfXgmzrJdUlAMpcU9Wipwa7eoyJmimMrSF+FXi5I3rvJW6lhJi1S2Y9JiX27ALN4WY7cax0i+sBDBjhZHQ4a16/lHuE1s+cQ7nxi3sJZZSFT3y6ozoN3rnkumX1gid22mRpSIIfyCTKCZkLxddC0mI1J7JxLPMI/DvrUt7IPYtHboRyXAzEMdn1lYxReMplE1HjOaeCWmVO8SKFeHaAA7q8jtg9DjnHG2Zqa8bqBvB9gE79F/UPpxVH+WEtsXiZ0dViXspOwRaHjL+Bs1Rpn5KJXJJpE2CRYzHPgvqUFstSsjgShmOadRKsR9yPuWjzRMd+5ry9sHMI3WPK2XulckoSneqmcOCy7ukC0/tAzkeWZPbS7ZnFZTCrAtd7Y4j0SCgkD0g4QMxocMZWR84ppqRtXdbVtKFzOvLi4d+d2jcwyca9zuqiIrsLodsN8yXU0Q0pn8nIBiTep4=
  - secure: wlG/BbrmwPKoqTNMfqToAjnUNVsmTVazdkDLrnfCf11yJYxh7LDeK2+qIkKzcnJc8y6L5ohBngcSqI7YK4Y0gAQr9MQlfEHR7uUZlqnmG1CDtx6TnNvaiMuzwOECb1R7/5fMOW6uxfXLsEMT375x6wizsJn5fNye7WK5edCTNoyIUih1S/pHLkbCOT6TxptfbHZ4ucPR5duh9BRhQjYdN1Zv3BlNMnGJ8wffMykYIs0F74LEg63ktDfP947nXd64RFcVZP+kuDHJH/3Pw4o/Qd9yqJKTgKVvT8gvMG+CzMxRPH+/1bkBfMPcRiGN8ObZMc0/5UzqM2IFigIXsecID3fzJnAsj4sJsetVJ/vmsPczE2T19sGGp8gdNRPHA3/nKHHkozLXc9BYcaFRMJoSlWttLKaWmnc0WhOqwsBoTDF+hBIB7Hnizll6leko5VF2XyQb3zE9KPcRo8q9BWM5VMTkap4v2Ib1zyZUrMfnpEkH3l5oJVChLu7XkZPPjtBda0SMyilvCQBvnFUMwDGL0dXok/mVU0JRDwnwKz4W8FVCHSoZLwNd+Ilngv7Bad6i+nN0r8IwhWihH6ee5f7uTyrGDgyTdzQq4K02Q3suzEYfE5iXVgkh7ZJ8DyZ1m+mhw6US+o1q+vf7w3f7MtUnaDSiUaI1aD74wdIeignaPM0=
